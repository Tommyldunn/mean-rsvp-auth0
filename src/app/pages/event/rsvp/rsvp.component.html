<div class="card-block">
  <h2 class="card-title text-center">RSVP</h2>
</div>

<!-- User has RSVPed -->
<div *ngIf="userRsvp">
  <p class="card-block lead">You have responded to this event with the following information:</p>

  <ul *ngIf="!showEditForm" class="list-group list-group-flush">
    <li class="list-group-item">
      <strong>Name:</strong>{{userRsvp.name}}
    </li>
    <li class="list-group-item">
      <strong>Attending:</strong>{{utils.booleanToText(userRsvp.attending)}}
    </li>
    <li *ngIf="userRsvp.attending" class="list-group-item">
      <strong>Guests:</strong>{{userRsvp.guests}}
    </li>
    <li *ngIf="userRsvp.comments" class="list-group-item">
      <strong>Comments:</strong><span [innerHTML]="userRsvp.comments"></span>
    </li>
  </ul>

  <div class="card-block">
    <button
      class="btn btn-info"
      [ngClass]="{'btn-info': !showEditForm, 'btn-warning': showEditForm}"
      (click)="toggleEditForm()">{{editBtnText}}</button>

    <app-rsvp-form
      *ngIf="showEditForm"
      [eventId]="eventId"
      [rsvp]="userRsvp"
      (submitRsvp)="onSubmitRsvp($event)"></app-rsvp-form>
  </div>
</div>

<!-- No RSVP yet -->
<div *ngIf="!userRsvp">
  <div class="card-block">
    <p class="lead">You have not RSVPed to this event yet. Fill out the form below to respond:</p>

    <app-rsvp-form
      [eventId]="eventId"
      (submitRsvp)="onSubmitRsvp($event)"></app-rsvp-form>
  </div>
</div>

<div class="card-block text-right">
  <button (click)="toggleShowRsvps()" class="btn btn-link btn-sm">{{showRsvpsText}}</button>
</div>

<!-- All RSVPs -->
<div *ngIf="showAllRsvps">
  <div class="card-block">
    <h3 class="card-title text-center">RSVPs</h3>
  </div>

  <ul class="list-group list-group-flush">
    <li class="list-group-item list-group-item-success justify-content-between">
      <strong>Attending</strong>
      <span class="badge badge-success badge-pill">{{totalAttending}}</span>
    </li>
    <li
      *ngFor="let rsvp of utils.filter(rsvps, 'attending', true)"
      class="list-group-item small">
      {{rsvp.name}} {{utils.showPlusOnes(rsvp.guests)}}
      <p *ngIf="auth.isAdmin && rsvp.comments" class="d-flex w-100">
        {{rsvp.comments}}
      </p>
    </li>
    <li class="list-group-item list-group-item-danger justify-content-between">
      <strong>Not Attending</strong>
    </li>
    <li
      *ngFor="let rsvp of utils.filter(rsvps, 'attending', false)"
      class="list-group-item small">
      {{rsvp.name}}
      <p *ngIf="auth.isAdmin && rsvp.comments" class="d-flex w-100">
        {{rsvp.comments}}
      </p>
    </li>
  </ul>
</div>

<!-- Footer showing # of total attending guests -->
<div class="card-footer text-right">
  <small class="text-muted">{{utils.displayCount(totalAttending)}} attending this event so far.</small>
</div>
