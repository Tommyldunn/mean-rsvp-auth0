<app-loading *ngIf="loading"></app-loading>

<div *ngIf="isLoaded">
  <h1 class="text-center">{{pageTitle}}</h1>
  <!-- Event -->
  <div *ngIf="event">
    <!-- Event is over -->
    <p *ngIf="eventPast" class="alert alert-danger">
      <strong>This event is over.</strong>
    </p>

    <div class="card">
      <!-- Event tab navigation -->
      <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs">
          <li class="nav-item">
            <a
              class="nav-link"
              [routerLink]="[]"
              [queryParams]="{tab: 'details'}"
              [ngClass]="{'active': tabIs('details')}">Details</a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link"
              [routerLink]="[]"
              [queryParams]="{tab: 'rsvp'}"
              [ngClass]="{'active': tabIs('rsvp')}">RSVP</a>
          </li>
        </ul>
      </div>

      <!-- Event detail tab -->
      <app-event-detail
        *ngIf="tabIs('details')"
        [event]="event"></app-event-detail>

      <!-- Event RSVP tab -->
      <app-rsvp
        *ngIf="tabIs('rsvp')"
        [rsvps]="rsvps"
        [eventPast]="eventPast"
        [eventId]="event._id"></app-rsvp>
    </div>
  </div>

  <!-- Error loading events -->
  <p *ngIf="error" class="alert alert-danger">
    <strong>Oops!</strong> There was an error retrieving information for this event. 
  </p>
</div>
